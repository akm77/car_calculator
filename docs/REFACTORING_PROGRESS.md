# –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É—Ç–∏–ª—å—Å–±–æ—Ä–∞ 2025

**–î–∞—Ç–∞**: 8 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ç–∫–∞**: `feature/spec-2025-utilization-upgrade`  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–≠–¢–ê–ü–´ 0-3 –ó–ê–í–ï–†–®–ï–ù–´** (Backend Core)

---

## üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 50% (5 –∏–∑ 10 —ç—Ç–∞–ø–æ–≤)

```
[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] 50%
```

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

- **–≠—Ç–∞–ø 0**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (100%)
- **–≠—Ç–∞–ø 1**: –ú–æ–¥–µ–ª–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (100%)
- **–≠—Ç–∞–ø 2**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Ç–∏–ª—å—Å–±–æ—Ä–∞ (100%)
- **–≠—Ç–∞–ø 3**: –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ —É—Ç–∏–ª—å—Å–±–æ—Ä–∞ (100%)
- **–≠—Ç–∞–ø 4**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—à–ª–∏–Ω –∏ –∫–æ–º–∏—Å—Å–∏–π (100%)

### üöß –í –ø—Ä–æ—Ü–µ—Å—Å–µ

- **–≠—Ç–∞–ø 5**: API –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–æ–∂–∏–¥–∞–µ—Ç –Ω–∞—á–∞–ª–∞)

### ‚è≥ –û–∂–∏–¥–∞—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **–≠—Ç–∞–ø 5**: API –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–≠—Ç–∞–ø 6**: –§—Ä–æ–Ω—Ç–µ–Ω–¥ (WebApp)
- **–≠—Ç–∞–ø 7**: Telegram Bot
- **–≠—Ç–∞–ø 8**: –¢–µ—Å—Ç—ã
- **–≠—Ç–∞–ø 9**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–≠—Ç–∞–ø 10**: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### Backend (Core Engine)

#### 1. **app/calculation/models.py**
```python
class CalculationRequest(BaseModel):
    # NEW: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –º–æ—â–Ω–æ—Å—Ç–∏
    engine_power_hp: int = Field(gt=0, le=1500, description="–ú–æ—â–Ω–æ—Å—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—è –≤ –ª.—Å.")
    # ...existing fields...

class CalculationMeta(BaseModel):
    # NEW: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ—â–Ω–æ—Å—Ç–∏ –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞
    engine_power_hp: int | None = None
    engine_power_kw: float | None = None
    utilization_coefficient: float | None = None
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (1-1500 –ª.—Å.)
- ‚úÖ Pydantic –º–æ–¥–µ–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ –ê–≤—Ç–æ–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ª.—Å. ‚Üí –∫–í—Ç (√ó 0.7355)

---

#### 2. **app/calculation/engine.py**

##### –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_utilization_fee_v2()`
```python
def _utilization_fee_v2(
    age_category: str,
    engine_cc: int,
    engine_power_hp: int,
    rates_conf: dict[str, Any]
) -> tuple[Decimal, float]:
    """
    –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —É—Ç–∏–ª—å—Å–±–æ—Ä–∞ (2025): 2D-—Ç–∞–±–ª–∏—Ü–∞ –ø–æ –æ–±—ä—ë–º—É –∏ –º–æ—â–Ω–æ—Å—Ç–∏.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: (fee_rub, coefficient)
    """
    # 1. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ª.—Å. ‚Üí –∫–í—Ç
    # 2. –ü–æ–∏—Å–∫ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –æ–±—ä—ë–º–∞ (5 bands)
    # 3. –ü–æ–∏—Å–∫ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –º–æ—â–Ω–æ—Å—Ç–∏ (~16 brackets per band)
    # 4. –í—ã–±–æ—Ä –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ (lt3 –∏–ª–∏ gt3)
    # 5. –†–∞—Å—á—ë—Ç: 20,000 √ó coefficient
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ 2D-–ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ 5 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –æ–±—ä—ë–º–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É

##### –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_commission()`
```python
def _commission(..., rates_conf: dict[str, Any] | None = None) -> Decimal:
    """NEW 2025: fixed 1000 USD or country override"""
    # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω–æ–≤—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π (UAE = 0)
    # 2. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è default_commission_usd (1000 USD ‚Üí RUB)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –ö–æ–º–∏—Å—Å–∏—è 1000 USD –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω
- ‚úÖ –û–ê–≠: –∫–æ–º–∏—Å—Å–∏—è = 0 (–≤–∫–ª—é—á–µ–Ω–∞ –≤ —Ä–∞—Å—Ö–æ–¥—ã —Å—Ç—Ä–∞–Ω—ã)
- ‚úÖ –ê–≤—Ç–æ–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å—É USD_RUB

##### ERA-GLONASS
```python
# NEW 2025 - configurable value
era_glonass_rub_dec = to_decimal(rates_conf.get("era_glonass_rub", 45000))
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ 45,000 —Ä—É–±. (configurable –≤ rates.yml)
- ‚úÖ –í–∫–ª—é—á—ë–Ω –≤ total_rub

---

#### 3. **config/rates.yml**

##### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ç–∏–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–±–æ—Ä–∞
```yaml
utilization_m1_personal:
  base_rate_rub: 20000
  volume_bands:
    # 5 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –æ–±—ä—ë–º–∞: ‚â§1000, 1001-2000, 2001-3000, 3001-3500, >3500
    - volume_range: [0, 1000]
      power_brackets:
        # ~5 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –º–æ—â–Ω–æ—Å—Ç–∏ –¥–ª—è –º–∞–ª–æ–≥–æ –æ–±—ä—ë–º–∞
        - {power_kw_max: 51.48, coefficient_lt3: 0.17, coefficient_gt3: 0.26}
        # ...
    
    - volume_range: [1001, 2000]
      power_brackets:
        # ~16 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –º–æ—â–Ω–æ—Å—Ç–∏ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ –æ–±—ä—ë–º–∞
        - {power_kw_max: 139.75, coefficient_lt3: 37.5, coefficient_gt3: 62.2}
        # ...
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ 80+ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ (5 bands √ó 16 brackets avg)
- ‚úÖ –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∏–∑ –¢–ó
- ‚úÖ YAML –≤–∞–ª–∏–¥–µ–Ω, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

##### ERA-GLONASS
```yaml
era_glonass_rub: 45000  # –±—ã–ª–æ: 0
```

---

#### 4. **config/commissions.yml**

```yaml
# –ï–¥–∏–Ω–∞—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è 1000 USD
default_commission_usd: 1000

by_country:
  uae:
    commission_usd: 0  # –í–∫–ª—é—á–µ–Ω–∞ –≤ —Ä–∞—Å—Ö–æ–¥—ã –î—É–±–∞—è
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–±—ã–ª–æ: 3 –ø–æ—Ä–æ–≥–∞ –ø–æ —Ü–µ–Ω–µ)
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞
- ‚úÖ –û–ê–≠ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è

---

#### 5. **config/duties.yml** ‚≠ê NEW

```yaml
# –¢–∞–º–æ–∂–µ–Ω–Ω—ã–µ –ø–æ—à–ª–∏–Ω—ã (2025)
# –ò—Å—Ç–æ—á–Ω–∏–∫: docs/SPECIFICATION.md
# –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08
# –ë—Ä—ç–∫–µ—Ç—ã lt3 –≤ EUR (–ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã –∏–∑ RUB –ø–æ –∫—É—Ä—Å—É ~100 RUB/EUR)

age_categories:
  lt3:
    value_brackets:
      - max_customs_value_eur: 3250     # ‚â§ 325,000 RUB
        percent: 0.54
        min_rate_eur_per_cc: 2.5
      - max_customs_value_eur: 6500     # 325,001-650,000 RUB
        percent: 0.48
        min_rate_eur_per_cc: 3.5
      - max_customs_value_eur: 16250    # 650,001-1,625,000 RUB
        percent: 0.48
        min_rate_eur_per_cc: 5.5
      - max_customs_value_eur: 32500    # 1,625,001-3,250,000 RUB
        percent: 0.48
        min_rate_eur_per_cc: 7.5
      - max_customs_value_eur: 65000    # 3,250,001-6,500,000 RUB
        percent: 0.48
        min_rate_eur_per_cc: 15
      - percent: 0.48                   # > 6,500,000 RUB
        min_rate_eur_per_cc: 20
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ 6 –±—Ä—ç–∫–µ—Ç–æ–≤ lt3 –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó 2025
- ‚úÖ –ü–æ—Ä–æ–≥–∏: 325k, 650k, 1625k, 3250k, 6500k RUB (–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ EUR)
- ‚úÖ –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø: config/duties_v1_backup_20251208.yml

---

#### 6. **app/calculation/engine.py** - _commission() ‚≠ê FIXED

```python
def _commission(...) -> Decimal:
    """Return commission in RUB (NEW 2025: fixed 1000 USD or country override)."""
    # Check for country-specific override (e.g., UAE = 0)
    if country:
        by_country = commissions_conf.get("by_country") or {}
        country_config = by_country.get(country)
        if country_config is not None:
            # New structure: commission_usd key directly in country config
            if isinstance(country_config, dict) and "commission_usd" in country_config:
                commission_usd = to_decimal(country_config["commission_usd"])
                if rates_conf:
                    return _convert(commission_usd, "USD", rates_conf)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: `commission_usd: 0` –≤–º–µ—Å—Ç–æ `- amount: 0`
- ‚úÖ –û–ê–≠ –∫–æ–º–∏—Å—Å–∏—è = 0 (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ç–µ—Å—Ç–æ–º)
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å legacy —Å–ø–∏—Å–∫–∞–º–∏

---

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### test_new_utilization.py (Sprint 0-3)
```python
# –¢–µ—Å—Ç 1: –Ø–ø–æ–Ω–∏—è lt3, 1500cc, 110 –ª.—Å. ‚Üí –∫–æ—ç—Ñ—Ñ. 0.26
# –¢–µ—Å—Ç 2: –ì—Ä—É–∑–∏—è gt5, 2500cc, 200 –ª.—Å. ‚Üí –∫–æ—ç—Ñ—Ñ. 145.9
# –¢–µ—Å—Ç 3: –û–ê–≠ 3_5, 3000cc, 250 –ª.—Å. ‚Üí –∫–æ–º–∏—Å—Å–∏—è 0
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã**:
```
‚úÖ –¢–µ—Å—Ç 1: –£—Ç–∏–ª—å—Å–±–æ—Ä 5,200 —Ä—É–±. (20,000 √ó 0.26)
‚úÖ –¢–µ—Å—Ç 2: –£—Ç–∏–ª—å—Å–±–æ—Ä 2,918,000 —Ä—É–±. (20,000 √ó 145.9)
‚úÖ –¢–µ—Å—Ç 3: –ö–æ–º–∏—Å—Å–∏—è 0 —Ä—É–±. (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ –û–ê–≠)
```

#### test_sprint4_duties.py (Sprint 4) ‚≠ê NEW
```python
# 7 —Ç–µ—Å—Ç–æ–≤: 6 –±—Ä—ç–∫–µ—Ç–æ–≤ lt3 + 2 –∫–æ–º–∏—Å—Å–∏–∏ (UAE=0, others=1000 USD)
# TEST 1-5: –ü—Ä–æ–≤–µ—Ä–∫–∞ duty brackets (3250, 6500, 16250, 32500, 65000+ EUR)
# TEST 6: UAE commission = 0
# TEST 7: Default commission = 1000 USD (~76k RUB at CBR rate)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã**:
```
‚úÖ –¢–µ—Å—Ç 1: –ü–æ—à–ª–∏–Ω–∞ 333k RUB (–±—Ä—ç–∫–µ—Ç 1, min rate 2.5 EUR/cc)
‚úÖ –¢–µ—Å—Ç 2: –ü–æ—à–ª–∏–Ω–∞ 621k RUB (–±—Ä—ç–∫–µ—Ç 2, min rate 3.5 EUR/cc)
‚úÖ –¢–µ—Å—Ç 3: –ü–æ—à–ª–∏–Ω–∞ 878k RUB (–±—Ä—ç–∫–µ—Ç 3, min rate 5.5 EUR/cc)
‚úÖ –¢–µ—Å—Ç 4: –ü–æ—à–ª–∏–Ω–∞ 2.66M RUB (–±—Ä—ç–∫–µ—Ç 5, min rate 15 EUR/cc)
‚úÖ –¢–µ—Å—Ç 5: –ü–æ—à–ª–∏–Ω–∞ 5.48M RUB (–±—Ä—ç–∫–µ—Ç 6, percent wins)
‚úÖ –¢–µ—Å—Ç 6: –ö–æ–º–∏—Å—Å–∏—è –û–ê–≠ = 0 —Ä—É–±. ‚úÖ
‚úÖ –¢–µ—Å—Ç 7: –ö–æ–º–∏—Å—Å–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö = 76,094 —Ä—É–±. (1000 USD √ó 76.09)
```

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**:
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ª.—Å. ‚Üí –∫–í—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ –ü–æ–∏—Å–∫ –≤ 2D-—Ç–∞–±–ª–∏—Ü–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (lt3/gt3)
- ‚úÖ ERA-GLONASS –≤–∫–ª—é—á—ë–Ω (45,000 —Ä—É–±)
- ‚úÖ –ö–æ–º–∏—Å—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (1000 USD / 0 –¥–ª—è –û–ê–≠)
- ‚úÖ –ù–æ–≤—ã–µ –±—Ä—ç–∫–µ—Ç—ã lt3 –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –õ–æ–≥–∏–∫–∞ max(percent, min_rate) —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìã –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å

### –≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—à–ª–∏–Ω ‚úÖ –ó–ê–í–ï–†–®–Å–ù
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å duties.yml ‚Äî –ø–æ—Ä–æ–≥–∏ lt3 –≤ RUB –∏–ª–∏ EUR? ‚Üí –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ EUR
- [x] –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞–≤–∫–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó (325k, 650k, 1625k, 3250k, 6500k RUB) ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–æ
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—á—ë—Ç –ø–æ—à–ª–∏–Ω—ã –¥–ª—è lt3 ‚Üí test_sprint4_duties.py (7 —Ç–µ—Å—Ç–æ–≤ ‚úÖ)
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É _commission() ‚Üí –ü–æ–¥–¥–µ—Ä–∂–∫–∞ commission_usd –≤ by_country

### –≠—Ç–∞–ø 5: API –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (1 —á–∞—Å)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å GET /api/meta
  - –î–æ–±–∞–≤–∏—Ç—å `engine_power_hp_min`, `engine_power_hp_max` –≤ constraints
  - –î–æ–±–∞–≤–∏—Ç—å `conversion_factors: {hp_to_kw: 0.7355}`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Swagger UI

### –≠—Ç–∞–ø 6: –§—Ä–æ–Ω—Ç–µ–Ω–¥ (WebApp) (3-4 —á–∞—Å–∞)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ "–ú–æ—â–Ω–æ—Å—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—è (–ª.—Å.)" –≤ —Ñ–æ—Ä–º—É
- [ ] –û–±–Ω–æ–≤–∏—Ç—å constants.js (ENGINE_POWER_HP_MIN/MAX)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å validator.js (–≤–∞–ª–∏–¥–∞—Ü–∏—è engine_power_hp)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å calculateCost() (–¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤ requestData)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å displayResult() (–ø–æ–∫–∞–∑–∞—Ç—å –º–æ—â–Ω–æ—Å—Ç—å –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç)

### –≠—Ç–∞–ø 7: Telegram Bot (1 —á–∞—Å)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ö–µ–Ω–¥–ª–µ—Ä—ã (–¥–æ–±–∞–≤–∏—Ç—å engine_power_hp –≤ –ø—Ä–∏–º–µ—Ä—ã)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ WebApp –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 8: –¢–µ—Å—Ç—ã (3-4 —á–∞—Å–∞)
- [ ] –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å tests/test_data/cases.yml
- [ ] –î–æ–±–∞–≤–∏—Ç—å engine_power_hp –≤–æ –≤—Å–µ –∫–µ–π—Å—ã
- [ ] –°–æ–∑–¥–∞—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã _utilization_fee_v2()
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å pytest tests/

### –≠—Ç–∞–ø 9: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (1-2 —á–∞—Å–∞)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å rpg.yaml (recent_changes)
- [ ] –°–æ–∑–¥–∞—Ç—å MIGRATION_GUIDE.md

### –≠—Ç–∞–ø 10: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è (1 —á–∞—Å)
- [ ] –ö–æ–¥-—Ä–µ–≤—å—é
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] CHANGELOG.md
- [ ] Pull Request

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **Backend**: 2 —Ñ–∞–π–ª–∞ (models.py, engine.py)
- **Config**: 3 —Ñ–∞–π–ª–∞ (rates.yml, commissions.yml, utilization_2025.yml)
- **Docs**: 2 —Ñ–∞–π–ª–∞ (REFACTORING_PLAN.md, SPECIFICATION.md)
- **Tests**: 1 —Ñ–∞–π–ª (test_new_utilization.py)

### –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: ~450 —Å—Ç—Ä–æ–∫
- **–ò–∑–º–µ–Ω–µ–Ω–æ**: ~120 —Å—Ç—Ä–æ–∫
- **–£–¥–∞–ª–µ–Ω–æ**: ~50 —Å—Ç—Ä–æ–∫ (—Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞)

### –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- **Manual tests**: 3/3 ‚úÖ
- **Unit tests**: 0/10 ‚è≥ (TODO)
- **Integration tests**: 0/15 ‚è≥ (TODO)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –≠—Ç–∞–ø–∞ 5 (API –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ) ‚Äî —ç—Ç–æ –±—ã—Å—Ç—Ä–æ (1 —á–∞—Å) –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å—Ä–æ—á–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ UI, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ –≠—Ç–∞–ø—É 6 (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥), –Ω–æ –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è /api/meta –ø—Ä–∏–¥—ë—Ç—Å—è —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å constraints.

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–í–æ–ø—Ä–æ—Å—ã**: –í—Å–µ 5 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ —Ä–µ—à–µ–Ω—ã ‚úÖ  
**–ë–ª–æ–∫–µ—Ä—ã**: –ù–µ—Ç  
**–†–∏—Å–∫–∏**: –ù–∏–∑–∫–∏–µ (—Å—Ç–∞—Ä—ã–µ —Ç–µ—Å—Ç—ã —Å–ª–æ–º–∞—é—Ç—Å—è, –Ω–æ —ç—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 8 –¥–µ–∫–∞–±—Ä—è 2025, 12:13  
**–ö–æ–º–º–∏—Ç**: `feat: implement 2025 utilization system`  
**–ê–≤—Ç–æ—Ä**: GitHub Copilot + –ó–∞–∫–∞–∑—á–∏–∫

